<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Meng Guo">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Python Study Note 1"/>
  <meta property="og:description" content="personal website, study notes, journals" />
  <meta property="og:site_name" content="聪明的GM"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.com"/>
  
    <link rel="alternate" href="/atom.xml" title="聪明的GM" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>聪明的GM</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Python Study Note 1</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/<your-github-username>">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:<your-email-address>">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Meng Guo</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2018-01-19</span>
            <span class="time">23:22:41</span>
          </span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="Study-Note-1-18-2018"><a href="#Study-Note-1-18-2018" class="headerlink" title="Study Note 1/18/2018"></a>Study Note 1/18/2018</h1><h2 id="An-example-of-using-Python-standard-library-amp-pandas"><a href="#An-example-of-using-Python-standard-library-amp-pandas" class="headerlink" title="An example of using Python standard library &amp; pandas"></a>An example of using Python standard library &amp; pandas</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">from collections import defaultdict</span><br><span class="line"></span><br><span class="line">#count the appearance of time zone</span><br><span class="line">def get_counts2(sequence):</span><br><span class="line">	counts = defaultdict(int) # values will initialize to 0</span><br><span class="line">	for x in sequence:</span><br><span class="line">		counts[x] += 1</span><br><span class="line">return counts</span><br><span class="line"></span><br><span class="line">path = &apos;ch02/usagov_bitly_data2012-03-16-1331923249.txt&apos;</span><br><span class="line">records = [json.loads(line) for line in open(path)]</span><br></pre></td></tr></table></figure>
<p><em>list comprehension: a concise way of applying an operation (like json.loads) to a collection of strings or other objects.</em></p>
<h2 id="Counting-Time-Zones-with-Python-standard-library"><a href="#Counting-Time-Zones-with-Python-standard-library" class="headerlink" title="Counting Time Zones with Python standard library"></a>Counting Time Zones with Python standard library</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [19]: records[0]</span><br><span class="line">Out[19]: u&apos;America/New_York</span><br><span class="line">In [31]: counts = get_counts(time_zones)</span><br><span class="line">In [32]: counts[&apos;America/New_York&apos;]</span><br><span class="line">Out[32]: 1251</span><br><span class="line">In [33]: len(time_zones)</span><br><span class="line">Out[33]: 3440</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def  top_counts(count_dict, n=10):</span><br><span class="line">	value_key_pairs = [(count, tz) for tz, count in count_dict.items()]  </span><br><span class="line">	value_key_pairs.sort()   </span><br><span class="line">return value_key_pairs[-n:]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [35]: top_counts(counts)</span><br><span class="line">Out[35]: [(33, u&apos;America/Sao_Paulo&apos;), (35, u&apos;Europe/Madrid&apos;), (36, u&apos;Pacific/Honolulu&apos;), (37, u&apos;Asia/Tokyo&apos;), (74, u&apos;Europe/London&apos;), (191, u&apos;America/Denver&apos;), (382, u&apos;America/Los_Angeles&apos;), (400, u&apos;America/Chicago&apos;), (521, u&apos;&apos;), (1251, u&apos;America/New_York&apos;)]</span><br></pre></td></tr></table></figure>
<p>If you search the Python standard library, you may find the collections.Counter class, which makes this task a lot easier:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> from collections import Counter</span><br><span class="line"> counts = Counter(time_zones)counts.most_common(10)</span><br></pre></td></tr></table></figure>
<h2 id="Counting-Time-Zones-with-Pandas"><a href="#Counting-Time-Zones-with-Pandas" class="headerlink" title="Counting Time Zones with Pandas"></a>Counting Time Zones with Pandas</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pandas import DataFrame, Series</span><br><span class="line">import pandas as pd</span><br><span class="line">frame = DataFrame(records)</span><br></pre></td></tr></table></figure>
<p>The output shown for the <em>frame</em> is the summary view, shown for large DataFrame objects. The Series object returned by <em>frame[‘tz’]</em> has a method value_counts that gives us what we’re looking for:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [294]: tz_counts = frame[&apos;tz&apos;].value_counts()</span><br><span class="line">In [295]: tz_counts[:10]</span><br></pre></td></tr></table></figure>
<p> You can do a bit of munging to fill in a substitute value for unknown and missing time zone data in the records. The fillna function can replace missing (NA) values and unknown (empty strings) values can be replaced by boolean array indexing:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [296]: clean_tz = frame[&apos;tz&apos;].fillna(&apos;Missing&apos;)</span><br><span class="line">In [297]: clean_tz[clean_tz == &apos;&apos;] = &apos;Unknown&apos;</span><br><span class="line">In [298]: tz_counts = clean_tz.value_counts()</span><br></pre></td></tr></table></figure>
<p>Making a horizontal bar plot can be accomplished using the plot method on the counts objects:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [301]: tz_counts[:10].plot(kind=&apos;barh&apos;, rot=0)</span><br></pre></td></tr></table></figure>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

